<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nossa Hist√≥ria de Amor ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <style>
        :root {
            --primary-pink: #ff4d6d;
            --soft-pink: #ffccd5;
            --dark-red: #c9184a;
            --white: #ffffff;
            --bg-gradient: linear-gradient(135deg, #fff0f3 0%, #ffccd5 100%);
            --glass: rgba(255, 255, 255, 0.6);
            --shadow-3d: 0 10px 30px rgba(0,0,0,0.15), 0 5px 15px rgba(0,0,0,0.1);
            --shadow-float: 0 20px 40px rgba(255, 77, 109, 0.25);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            color: #590d22;
            overflow-x: hidden;
            text-align: center;
            min-height: 100vh;
            background-image: url('https://www.transparenttextures.com/patterns/heart.png');
        }
        #admin-panel {
            position: fixed;
            left: -350px;
            top: 0;
            width: 320px;
            height: 100%;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            z-index: 1000;
            box-shadow: 8px 0 25px rgba(0,0,0,0.15);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding: 20px;
            text-align: left;
            border-radius: 0 25px 25px 0;
            overflow-y: auto;
        }
        #admin-panel.active { left: 0; }
        .toggle-admin {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background: linear-gradient(145deg, #ff5a7a, #c9184a);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 8px 25px rgba(255, 77, 109, 0.5);
            font-size: 1.6rem;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }
        .admin-section {
            background: linear-gradient(145deg, #ffffff 0%, #fff5f7 100%);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 18px;
            box-shadow: var(--shadow-3d);
        }
        .admin-section h4 { color: var(--dark-red); font-family: 'Dancing Script', cursive; font-size: 1.4rem; margin-bottom: 12px; }
        .btn-upload {
            display: block;
            background: linear-gradient(145deg, #ffdae6, #ffb3c6);
            padding: 14px;
            text-align: center;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            transition: 0.3s;
            border: 2px dashed var(--primary-pink);
            color: var(--dark-red);
        }
        .btn-upload:hover { background: var(--primary-pink); color: white; }
        .btn-action {
            display: block;
            width: 100%;
            background: linear-gradient(145deg, #ff5a7a, #c9184a);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            box-shadow: 0 5px 20px rgba(255, 77, 109, 0.4);
        }
        .btn-action:hover { transform: translateY(-3px); }
        .btn-action.recording { background: #dc3545; animation: pulse 0.5s infinite; }
        input[type="file"], input[type="text"], textarea { display: none; }
        input[type="text"], textarea { display: block; width: 100%; padding: 12px; border: 2px solid var(--soft-pink); border-radius: 12px; margin-top: 8px; font-family: 'Poppins', sans-serif; }
        textarea { resize: vertical; min-height: 80px; }
        #status { display: none; color: var(--primary-pink); font-size: 0.85rem; margin-top: 8px; text-align: center; padding: 10px; background: var(--soft-pink); border-radius: 10px; }
        header { padding: 70px 20px 30px; background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, transparent 100%); }
        h1 { font-family: 'Dancing Script', cursive; font-size: 4rem; color: var(--dark-red); margin-bottom: 25px; text-shadow: 3px 3px 0px rgba(255,255,255,0.8); animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .counter-container {
            background: linear-gradient(145deg, #ffffff 0%, #fff5f7 100%);
            padding: 25px 50px;
            border-radius: 30px;
            display: inline-block;
            margin: 20px 0;
            box-shadow: var(--shadow-float);
        }
        #timer { font-size: 1.5rem; font-weight: 600; color: var(--dark-red); }
        .main-content { max-width: 1100px; margin: 0 auto; padding: 20px; }
        .card-love { background: white; padding: 55px 45px; border-radius: 40px; box-shadow: var(--shadow-float); margin-bottom: 50px; border: 2px solid var(--soft-pink); }
        .card-love::before, .card-love::after { content: 'üíï'; position: absolute; top: 25px; font-size: 2rem; animation: pulse 2s infinite; }
        .card-love::before { left: 25px; }
        .card-love::after { right: 25px; animation-delay: 0.5s; }
        .card-love p { max-width: 800px; line-height: 2.2; text-align: center; font-size: 1.15rem; color: #7209b7; }
        .section { margin-bottom: 50px; }
        h2 { font-family: 'Dancing Script', cursive; font-size: 3rem; color: var(--dark-red); margin-bottom: 35px; }
        .notes-container { display: flex; flex-direction: column; gap: 25px; align-items: center; }
        .note-card { background: white; padding: 30px 35px; border-radius: 25px; max-width: 750px; width: 100%; box-shadow: var(--shadow-float); transition: 0.4s; border: 2px solid var(--soft-pink); position: relative; }
        .note-card:hover { transform: translateY(-8px); box-shadow: 0 30px 50px rgba(255, 77, 109, 0.25); }
        .note-card .date { font-size: 0.8rem; color: #999; margin-bottom: 12px; }
        .note-card .message { font-size: 1.15rem; line-height: 1.9; color: #590d22; }
        .note-card .author { font-family: 'Dancing Script', cursive; font-size: 1.4rem; color: var(--primary-pink); margin-top: 18px; text-align: right; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(290px, 1fr)); gap: 30px; justify-content: center; padding-bottom: 100px; }
        .media-item { background: white; padding: 15px; border-radius: 20px; box-shadow: var(--shadow-3d); transition: 0.5s; border: 2px solid #fff5f7; position: relative; }
        .media-item:hover { transform: translateY(-12px) rotate(2deg); box-shadow: 0 25px 45px rgba(255, 77, 109, 0.25); }
        .media-item img, .media-item video { width: 100%; height: 290px; object-fit: cover; border-radius: 12px; }
        .media-item .media-date { position: absolute; bottom: 12px; left: 15px; font-size: 0.75rem; color: #999; background: rgba(255,255,255,0.9); padding: 5px 10px; border-radius: 20px; }
        .media-item .delete-btn { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; opacity: 0; transition: 0.3s; }
        .media-item:hover .delete-btn { opacity: 1; }
        .audio-item { background: white; padding: 22px; border-radius: 20px; margin-bottom: 18px; display: flex; align-items: center; gap: 15px; box-shadow: var(--shadow-3d); }
        .audio-item .play-btn { width: 55px; height: 55px; border-radius: 50%; background: var(--primary-pink); border: none; color: white; font-size: 1.3rem; cursor: pointer; }
        .audio-item audio { flex: 1; height: 45px; }
        .audio-item .audio-date { font-size: 0.75rem; color: #999; width: 90px; text-align: right; }
        .music-player { position: fixed; right: 25px; bottom: 25px; z-index: 100; background: white; padding: 12px 18px; border-radius: 50px; box-shadow: var(--shadow-float); display: flex; align-items: center; gap: 12px; }
        .heart-trail { position: fixed; pointer-events: none; color: var(--primary-pink); font-size: 1.8rem; animation: moveUp 1.2s ease-out forwards; z-index: 9999; }
        @keyframes moveUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-150px) scale(0); opacity: 0; } }
        .empty-state { color: #999; font-style: italic; padding: 50px; font-size: 1.1rem; background: rgba(255,255,255,0.5); border-radius: 20px; }
        .toast { position: fixed; top: 25px; right: 25px; background: var(--dark-red); color: white; padding: 18px 28px; border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.3); z-index: 10000; animation: slideIn 0.4s; font-weight: 600; }
        .toast.success { background: #28a745; }
        .toast.error { background: #dc3545; }
        @keyframes slideIn { from { transform: translateX(500px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body>
    <button class="toggle-admin" onclick="toggleAdmin()">‚öôÔ∏è</button>
    <div id="admin-panel">
        <h3 style="color: var(--dark-red); font-family: 'Dancing Script'; font-size: 2rem;">Painel do Amor üíï</h3>
        <div class="admin-section">
            <h4>üìù Recadinho</h4>
            <input type="text" id="note-author" placeholder="Seu nome">
            <textarea id="note-message" placeholder="Escreva seu recadinho..."></textarea>
            <button class="btn-action" onclick="saveNote()">üíù Salvar</button>
        </div>
        <div class="admin-section">
            <h4>üì∏ Foto</h4>
            <label for="photo-input" class="btn-upload">Escolher Foto</label>
            <input type="file" id="photo-input" accept="image/*">
        </div>
        <div class="admin-section">
            <h4>üé¨ V√≠deo</h4>
            <label for="video-input" class="btn-upload">Escolher V√≠deo</label>
            <input type="file" id="video-input" accept="video/*">
        </div>
        <div class="admin-section">
            <h4>üé§ √Åudio</h4>
            <button class="btn-action" id="record-btn" onclick="toggleRecording()">üé§ Gravar</button>
            <div id="recording-status" style="display:none; color: #dc3545; margin-top: 5px;">üî¥ Gravando...</div>
        </div>
        <div class="admin-section">
            <h4>üéµ M√∫sica</h4>
            <label for="music-input" class="btn-upload">Selecionar</label>
            <input type="file" id="music-input" accept="audio/*">
        </div>
        <div class="admin-section">
            <button class="btn-action" style="background: #dc3545;" onclick="clearAllData()">üóëÔ∏è Limpar Tudo</button>
        </div>
        <div id="status"></div>
    </div>
    <header data-aos="fade-down">
        <h1>Nossa Hist√≥ria de Amor ‚ù§Ô∏è</h1>
        <div class="counter-container"><div id="timer">Carregando...</div></div>
    </header>
    <div class="main-content">
        <section class="section">
            <h2>Recadinhos üíå</h2>
            <div class="notes-container" id="notes-container"></div>
        </section>
        <section class="section">
            <h2>Lembran√ßas üì∏</h2>
            <div class="gallery" id="media-gallery"></div>
        </section>
        <section class="section">
            <h2>Vozes üé§</h2>
            <div id="audio-container"></div>
        </section>
    </div>
    <div class="music-player" id="player-container" style="display: none;">
        <span>üéµ</span>
        <audio id="audio-player" controls loop></audio>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        const STORAGE_KEYS = { notes: 'amor_notes', media: 'amor_media', audios: 'amor_audios', music: 'amor_music' };
        const storage = {
            get: (key) => { const data = localStorage.getItem(key); return data ? JSON.parse(data) : []; },
            set: (key, data) => { localStorage.setItem(key, JSON.stringify(data)); },
            add: (key, item) => { const data = storage.get(key); data.unshift(item); storage.set(key, data); },
            remove: (key, index) => { const data = storage.get(key); data.splice(index, 1); storage.set(key, data); }
        };
        AOS.init({ duration: 1200, once: true });
        const startDate = new Date("2025-12-24T00:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime();
            const diff = now - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById("timer").innerHTML = days + 'd ' + hours + 'h ' + mins + 'm ' + secs + 's de amor';
        }
        setInterval(updateTimer, 1000);
        window.toggleAdmin = () => document.getElementById('admin-panel').classList.toggle('active');
        const handleTrail = (e) => {
            const x = e.clientX || (e.touches && e.touches[0].clientX);
            const y = e.clientY || (e.touches && e.touches[0].clientY);
            if (!x || !y) return;
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.className = 'heart-trail';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 1200);
        };
        document.addEventListener('mousemove', handleTrail);
        document.addEventListener('touchmove', handleTrail);
        window.showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            toast.className = 'toast ' + type;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        };
        const formatDate = (timestamp) => {
            if (!timestamp) return '';
            const date = new Date(timestamp);
            return date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        };
        const loadNotes = () => {
            const container = document.getElementById('notes-container');
            const notes = storage.get(STORAGE_KEYS.notes);
            if (notes.length === 0) { container.innerHTML = '<div class="empty-state">Sem recadinhos ainda üíï</div>'; return; }
            container.innerHTML = '';
            notes.forEach((note, index) => {
                const div = document.createElement('div');
                div.className = 'note-card';
                div.innerHTML = '<div class="date">' + formatDate(note.time) + '</div><div class="message">' + note.message + '</div><div class="author">' + (note.author || 'An√¥nimo') + '</div><button class="delete-btn" onclick="deleteNote(' + index + ')">üóëÔ∏è</button>';
                container.appendChild(div);
            });
        };
        const loadMedia = () => {
            const container = document.getElementById('media-gallery');
            const media = storage.get(STORAGE_KEYS.media);
            if (media.length === 0) { container.innerHTML = '<div class="empty-state">Sem fotos/v√≠deos ainda üì∏</div>'; return; }
            container.innerHTML = '';
            media.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'media-item';
                if (item.type === 'img') div.innerHTML = '<img src="' + item.url + '"><div class="media-date">' + formatDate(item.time) + '</div><button class="delete-btn" onclick="deleteMedia(' + index + ')">üóëÔ∏è</button>';
                else if (item.type === 'video') div.innerHTML = '<video src="' + item.url + '" controls></video><div class="media-date">' + formatDate(item.time) + '</div><button class="delete-btn" onclick="deleteMedia(' + index + ')">üóëÔ∏è</button>';
                container.appendChild(div);
            });
        };
        const loadAudios = () => {
            const container = document.getElementById('audio-container');
            const audios = storage.get(STORAGE_KEYS.audios);
            if (audios.length === 0) { container.innerHTML = '<div class="empty-state">Sem √°udios ainda üé§</div>'; return; }
            container.innerHTML = '';
            audios.forEach((audio, index) => {
                const div = document.createElement('div');
                div.className = 'audio-item';
                div.innerHTML = '<button class="play-btn" onclick="this.nextElementSibling.play()">‚ñ∂</button><audio src="' + audio.url + '"></audio><span class="audio-date">' + formatDate(audio.time) + '</span><button class="delete-btn" style="opacity:1" onclick="deleteAudio(' + index + ')">üóëÔ∏è</button>';
                container.appendChild(div);
            });
        };
        window.saveNote = () => {
            const author = document.getElementById('note-author').value.trim();
            const message = document.getElementById('note-message').value.trim();
            if (!message) { showToast('Escreva algo! üíï', 'error'); return; }
            storage.add(STORAGE_KEYS.notes, { author: author || 'Namorado(a)', message: message, time: Date.now() });
            document.getElementById('note-message').value = '';
            document.getElementById('note-author').value = '';
            showToast('Salvo! üíå');
            loadNotes();
        };
        window.deleteNote = (index) => { if (confirm('Excluir?')) { storage.remove(STORAGE_KEYS.notes, index); loadNotes(); showToast('Exclu√≠do'); } };
        document.getElementById('photo-input').addEventListener('change', (e) => {
            const file = e.target.files[0]; if (!file) return;
            const reader = new FileReader();
            reader.onload = (event) => {
                storage.add(STORAGE_KEYS.media, { url: event.target.result, type: 'img', time: Date.now() });
                showToast('Foto adicionada! üì∏');
                loadMedia();
                e.target.value = '';
            };
            reader.readAsDataURL(file);
        });
        document.getElementById('video-input').addEventListener('change', (e) => {
            const file = e.target.files[0]; if (!file) return;
            const reader = new FileReader();
            reader.onload = (event) => {
                storage.add(STORAGE_KEYS.media, { url: event.target.result, type: 'video', time: Date.now() });
                showToast('V√≠deo adicionado! üé¨');
                loadMedia();
                e.target.value = '';
            };
            reader.readAsDataURL(file);
        });
        window.deleteMedia = (index) => { if (confirm('Excluir?')) { storage.remove(STORAGE_KEYS.media, index); loadMedia(); showToast('Exclu√≠do'); } };
        let mediaRecorder, audioChunks = [], isRecording = false;
        window.toggleRecording = async () => {
            const btn = document.getElementById('record-btn');
            const status = document.getElementById('recording-status');
            if (!isRecording) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];
                    mediaRecorder.ondataavailable = (e) => audioChunks.push(e.data);
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            storage.add(STORAGE_KEYS.audios, { url: event.target.result, time: Date.now() });
                            showToast('√Åudio gravado! üé§');
                            loadAudios();
                        };
                        reader.readAsDataURL(audioBlob);
                        stream.getTracks().forEach(track => track.stop());
                    };
                    mediaRecorder.start();
                    isRecording = true;
                    btn.textContent = '‚èπÔ∏è Parar';
                    btn.classList.add('recording');
                    status.style.display = 'block';
                } catch (err) { showToast('Erro no microfone üò¢', 'error'); }
            } else {
                mediaRecorder.stop();
                isRecording = false;
                btn.textContent = 'üé§ Gravar';
                btn.classList.remove('recording');
                status.style.display = 'none';
            }
        };
        window.deleteAudio = (index) => { if (confirm('Excluir?')) { storage.remove(STORAGE_KEYS.audios, index); loadAudios(); showToast('Exclu√≠do'); } };
        window.clearAllData = () => {
            if (confirm('APAGAR TUDO? Esta a√ß√£o n√£o pode ser desfeita!')) {
                localStorage.clear();
                loadNotes(); loadMedia(); loadAudios();
                showToast('Tudo apagado üò¢');
            }
        };
        document.getElementById('music-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    document.getElementById('audio-player').src = event.target.result;
                    document.getElementById('player-container').style.display = 'flex';
                    localStorage.setItem(STORAGE_KEYS.music, event.target.result);
                    showToast('M√∫sica adicionada! üéµ');
                };
                reader.readAsDataURL(file);
            }
        });
        window.addEventListener('load', () => {
            const savedMusic = localStorage.getItem(STORAGE_KEYS.music);
            if (savedMusic) {
                document.getElementById('audio-player').src = savedMusic;
                document.getElementById('player-container').style.display = 'flex';
            }
        });
        loadNotes();
        loadMedia();
        loadAudios();
    </script>
</body>
</html>
